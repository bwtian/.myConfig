# -*- mode: org; org-export-babel-evaluate: nil -*- 
#+TITLE: Rprofile 
#+AUTHOR: Bingwei TIAN
#+EMAIL: bwtian@gmail.com
#+DATE:  
#+OPTIONS: H:4 toc:2 num:2 
#+STARTUP: align fold nodlcheck hidestars oddeven lognotestate inlineimages 
#+LICENSE: All Right Reserved Before [2015-12-31 Thu], After that GPLv3 
#+CREATED:  
#+LASTEDIT:  
#+CATEGORIES: Org-babel, R and R function file 
#+PROPERTY:   header-args  session *R* 
#+PROPERTY:   exports both  
#+PROPERTY:   cache yes 
#+PROPERTY:   tangle yes 
#+DEPENDENCY: 

* setup R profile
#+NAME: sh:setRprofileLinux
#+BEGIN_SRC sh  :tangle ~/Dropbox/config/R/rProfile/setRprofileLinux.sh
# Now=$(date +%Y-%m-%d-%H%M%S)
# cp ~/.Rprofile ~/.Rprofile.$Now
unalias ln
ln -sfv ~/Dropbox/config/R/rProfile/R00_Linux_Main_Rprofile.R  ~/.Rprofile
#+END_SRC

* Linux main R profile which linked to ~/Rprofile see [[sh:setRprofileLinux ]]
#+BEGIN_SRC R :tangle ~/Dropbox/config/R/rProfile/R00_Linux_Main_Rprofile.R
  ### This file is sourced by or symbol linked to ~/.Rprofile
  sourceDir <- function(path = ".") {
          for (file in list.files(path, pattern = "\\.[Rr]$")) {
                  source(file.path(path,file))
          }
  }
  sourceDir("~/Dropbox/config/R/rProfile/RprofilesAuto")
#+END_SRC
* R profiles settings all R functions
** Choose nearest CRAN mirror
#+BEGIN_SRC R :tangle ~/Dropbox/config/R/rProfile/RprofilesAuto/CRANmirror.R
  ## Don't ask me for my CRAN mirror every time
  local({r <- getOption("repos")
         r["CRAN"] <- "http://cran.md.tsukuba.ac.jp"
         options(repos=r)})
#+END_SRC
** First Function
.First() run at the start of every R session. 
   - Use to load commonly used packages 
   - set default workspace
#+BEGIN_SRC R :tangle ~/Dropbox/config/R/rProfile/RprofilesAuto/First.R
    ## Don't ask me for my CRAN mirror every time
    .First <- function() {
            cat("Current R.version is:", as.character(getRversion()), "\n")
            cat("Current R.repos is:", getOption("repos"), "\n")
            cat("Current R.Library is:", .libPaths(), "\n")
            cat("Current R.Workdir is:", getwd(), "\n")
            cat("\nSuccessfully loaded .Rprofile at:", date(), "\n")
}
#+END_SRC
** Last Function
.Last() run at the end of the session
#+BEGIN_SRC R :tangle ~/Dropbox/config/R/rProfile/RprofilesAuto/Last.R
  .Last <- function() {
    # save command history here? ask=graphics
    #update.packages(ask= FALSE)  
    #timestamp(,prefix=paste("##------ [",getwd(),"] ",sep=""))
    #try(savehistory("~/.Rhistory"))
          cat("\nGoodbye at ", date(), "\n")
  }
#+END_SRC
** Main Options
#+BEGIN_SRC R :tangle ~/Dropbox/config/R/rProfile/RprofilesAuto/options.R
options(prompt="R:> ", digits=4, show.signif.stars=FALSE)  ## R Prompt
## WARNING!!! This makes your code less portable/reproducible.
options(stringsAsFactors=FALSE)
# Paper size
options(papersize="a4")
options(max.print = 20000)
options(help_type="html")
Sys.setenv(R_HISTSIZE='100000')
# General options 
options("width"=80)                # wide display with multiple monitors
options(tab.width = 8)
options("digits.secs" = 3)          # show sub-second time stamps

#+END_SRC
** myFucntions
#+BEGIN_SRC R :tangle ~/Dropbox/config/R/rProfile/RprofilesAuto/myFunctions.R
R_ver  <- as.character(getRversion())
proxy  <- function(){
  Sys.setenv("http_proxy"="http://proxy.kuins.net:8080/")
}
#+END_SRC
** phdFunctions
